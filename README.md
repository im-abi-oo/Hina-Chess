# Hina Chess Pro โ ูุณุฎู ต.ฐ (ูพุฑู) โ๏ธ

Hina Chess Pro ฺฉ ูพูุชูุฑู ุดุทุฑูุฌ ุขููุงู ูุฏุฑูุ ุณุฑุน ู ุฑุณูพุงูุณู ุงุณุช ฺฉู ุจุฑุง ุชุฌุฑุจู ุญุฑููโุง ุจุงุฒ ุดุทุฑูุฌ ุฏุฑ ูุจ ุทุฑุงุญ ุดุฏู ุงุณุช. ุงู ูุฎุฒู ุดุงูู ฺฉ ุงูพ ูููโุงุณุชฺฉ Next.js ุจุง ุณุฑูุฑ Express ุณูุงุฑุดุ ุงุฑุชุจุงุท Real-time ุจุง Socket.ioุ ู ูพุงฺฏุงูโุฏุงุฏู MongoDB ูโุจุงุดุฏ.

---

## ๐ ุฎูุงุตู (Overview)

* ุจุงุฒ ุขููุงู ุฏูโููุฑู ุจุง ุงูุชูุงู ุญุฑฺฉุช ุฏุฑ ูุญุธู (WebSockets).
* ุงุนุชุจุงุฑุณูุฌุ ูุงุจ ุฒูุฏูุ ฺุช ุฏุฑููโุจุงุฒ ู ุณุณุชู ุฏูุณุชุงู.
* ุชุงูุฑ ุฏูฺฏุงูู (ุณุงุนุช ุดุทุฑูุฌ) ุจุฑุง ูุฑ ุจุงุฒฺฉู.
* ุดุฎุตโุณุงุฒ ุชู (ุชุฑู/ุฑูุดู) ู ูุฌููุนู ููุฑูโูุง.
* PWA-Ready ู ุทุฑุงุญ ุฑุณูพุงูุณู ุจุฑุง ููุจุงู/ุชุจูุช/ุฏุณฺฉุชุงูพ.

---

## โจ ูฺฺฏโูุง ฺฉูุฏ

* ุชุฌุฑุจู Real-time ุจุง ุชุฃุฎุฑ ฺฉู (Socket.io).
* ููุงูู ุฏุฑุณุช ุดุทุฑูุฌ ู ุฌููฺฏุฑ ุงุฒ ุญุฑฺฉุงุช ุบุฑูุฌุงุฒ (chess.js).
* ูุฏุฑุช ุงุชุงู ู ููุจุชโุฏู ููุดููุฏ.
* ฺุช ุนููู ู ุฎุตูุต ุจุง ููุชุฑ XSS.
* ุงุญุฑุงุฒ ููุช ุงูู ุจุง JWT ู ูฺฏูุฏุงุฑ ฺฉูฺฉ ุงูู.
* ุฐุฎุฑู ุณูุงุจู ุจุงุฒ ู ุฑุชุจูโุจูุฏ (ELO) ุฏุฑ MongoDB.
* PWA: ูุตุจโูพุฐุฑ ุฑู ููุจุงู ู ุฏุณฺฉุชุงูพ.

---

## ๐ ุชฺฉููููฺโูุง

* **Frontend:** Next.js, React, Tailwind CSS
* **Backend:** Node.js, Express
* **Realtime:** Socket.io
* **DB:** MongoDB (Mongoose)
* **Logic:** chess.js, react-chessboard
* **Security:** JWT, bcrypt.js
* **PWA:** manifest + service worker

---

## ๐ ูพุดโูุงุฒูุง

* Node.js ูุณุฎู 16+
* MongoDB ุฏุฑ ุญุงู ุงุฌุฑุง (ุง Atlas)
* npm (ุง yarn)

---

## ๐งฉ ุฑุงูโุงูุฏุงุฒ ุณุฑุน (Quickstart)

```bash
# 1. ฺฉููู ฺฉุฑุฏู ูุฎุฒู
git clone <repo-url> hina-chess
cd hina-chess

# 2. ูุตุจ ูุงุจุณุชฺฏโูุง
npm install

# 3. ูุงู .env ุฑุง ุจุณุงุฒุฏ (ูุซุงู ูพุงู)
cp .env.example .env
# ุณูพุณ ููุงุฏุฑ ุฑุง ูุฑุงุด ฺฉูุฏ

# 4. ุงุฌุฑุง ูุญุท ุชูุณุนู
npm run dev

# ูุฑูุฑฺฏุฑ: http://localhost:3000
```

### ููููู `.env`

```
MONGODB_URI=mongodb://localhost:27017/hina_chess
JWT_SECRET=your_secret_key_here
PORT=3000
COOKIE_SECRET=another_secret
NODE_ENV=development
```

---

## ๐ ุณุงุฎุชุงุฑ ูพูุดูโูุง

```
โโโ lib/
โ   โโโ db.js          # ุงุชุตุงู ู ูพฺฉุฑุจูุฏ MongoDB
โ   โโโ models.js      # ูุฏูโูุง Mongoose: User, Game, Message, FriendRequest
โ   โโโ rooms.js       # ูุฏุฑุช ุงุชุงูโูุง (in-memory / cache)
โ   โโโ socket.js      # ฺฉูุชุฑูุฑ ุฑูุฏุงุฏูุง ุณูฺฉุช ู ููุทู ุจุงุฒ
โโโ pages/
โ   โโโ api/
โ   โ   โโโ auth/      # ูุฑูุฏุ ุซุจุชโูุงูุ ูุฑุงููุด ุฑูุฒ ู ุฑูุฑุด ุชูฺฉู
โ   โ   โโโ games/     # ุงูุฏูพููุชโูุง ูุฑุชุจุท ุจุง ุจุงุฒโูุง ู ุชุงุฑุฎฺู
โ   โโโ game/[id].js   # ุตูุญู ุจุงุฒ (ูุญุท ุดุทุฑูุฌ + ฺุช + ุชุงูุฑ)
โ   โโโ auth.js        # ุตูุญุงุช ูุฑูุฏ ู ุซุจุชโูุงู
โ   โโโ dashboard.js   # ูุงุจ ู ูุณุช ุงุชุงูโูุง
โโโ public/            # ุขฺฉูโูุงุ ุตุฏุงูุง (move, check, capture), manifest
โโโ styles/            # ุชูฺฉูโูุง ุชู ู ูุงูโูุง Tailwind / CSS
โโโ components/        # ฺฉุงููพูููุชโูุง ุฑุงุจุท ฺฉุงุฑุจุฑ ูุงุจู ุงุณุชูุงุฏู ูุฌุฏุฏ
โโโ utils/             # ุชูุงุจุน ฺฉูฺฉ: validation, filters, api-helpers
โโโ server.js          # entry point ุณุฑูุฑ Express + Socket.io
```

---

## ๐ API / Socket โ ููุง ฺฉู

### API (REST)

* `POST /api/auth/register` โ ุซุจุชโูุงู ฺฉุงุฑุจุฑ
* `POST /api/auth/login` โ ูุฑูุฏ ู ุงุฑุงุฆู JWT
* `GET  /api/games/:id` โ ุฏุฑุงูุช ูุถุนุช ู ุชุงุฑุฎฺู ุจุงุฒ
* `GET  /api/user/me` โ ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ (ูุงุฒ ุจู JWT)

### ุฑูุฏุงุฏูุง Socket (ููููู)

* `joinRoom` โ ูพูุณุชู ุจู ุงุชุงู ุจุงุฒ
* `leaveRoom` โ ุฎุฑูุฌ ุงุฒ ุงุชุงู
* `move` โ ุงุฑุณุงู ุญุฑฺฉุช (ุณุฑูุฑ ููุงูู ุฑุง ุงุนุชุจุงุฑุณูุฌ ูโฺฉูุฏ)
* `chatMessage` โ ุงุฑุณุงู ูพุงู ฺุช ุฏุฑ ุงุชุงู
* `gameOver` โ ูพุงุงู ุจุงุฒ (ุจูโุฏูุงู ูุฎุชูู: ูุงุชุ ููุชุ ุชุณูู)
* `syncState` โ ููฺฏุงูโุณุงุฒ ฺฉุงูู ูุถุนุช ุจุงุฒ (ุจุฑุง reconnect)

> ุชูุฌู: ุชูุงู ูพุบุงูโูุง ฺุช ุจุงุฏ ุงุฒ ุณูุช ุณุฑูุฑ ููุชุฑ XSS ุดููุฏ ู ูุญุฏูุฏุช ูุฑุฎ (rate limiting) ุงุนูุงู ฺฏุฑุฏุฏ.

---

## ๐ ุงููุช ู ุญุฑู ุฎุตูุต

* JWT ุจุฑุง ุงุญุฑุงุฒ ููุช ุจุง ุฒูุงู ุงููุถุง ููุงุณุจ.
* ฺฉูฺฉโูุง ุญุณุงุณ ุจุง `httpOnly`, `secure` ู `sameSite` ููุงุณุจ.
* ูุด ฺฉุฑุฏู ุฑูุฒ ุนุจูุฑ ุจุง bcrypt.
* ุงุนุชุจุงุฑุณูุฌ ูุฑูุฏโูุง ู ููุชุฑ XSS ุฏุฑ ูพุงูโูุง.
* ูุญุฏูุฏุช ุชูุงุดโูุง ูุฑูุฏ (brute-force protection).

---

## ๐ฑ PWA ู ุฑุณูพุงูุณู

* manifest.json ู service worker ุฌูุช ูุตุจ ุงูพ ุฑู ููุจุงู/ุฏุณฺฉุชุงูพ.
* ุทุฑุงุญ ููุจุงูโุงูู (mobile-first) ุจุง Tailwindุ ุตูุญุงุช ุจูููโุดุฏู ุจุฑุง ููุณ ู ุงูุฏุงุฒูโูุง ฺฉูฺฺฉ.
* ุขููุงู ูุญุฏูุฏ: ุตูุญุงุช ูุงุจ ู ุนูุงุตุฑ UI ฺฉุด ูโุดููุฏุ ูู ุจุงุฒโูุง Real-time ูุงุฒููุฏ ุงุชุตุงูโุงูุฏ.

---

## ๐ณ ุฏุงฺฉุฑ (ุงุฎุชุงุฑ)

ููููู `Dockerfile` ู `docker-compose.yml` ุณุงุฏู ุจุฑุง ุชูุณุนู/ุงุณุชุฌูฺฏ:

**Dockerfile**

```dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .
ENV NODE_ENV=production
RUN npm run build
CMD ["node", "server.js"]
```

**docker-compose.yml**

```yaml
version: '3.8'
services:
  app:
    build: .
    ports:
      - "3000:3000"
    environment:
      - MONGODB_URI=mongodb://mongo:27017/hina_chess
      - JWT_SECRET=your_secret
    depends_on:
      - mongo
  mongo:
    image: mongo:6
    volumes:
      - mongo-data:/data/db
volumes:
  mongo-data:
```

---

## ๐งช ุชุณุช ู ุชูุณุนู

* ุจุฑุง ุชุณุช ูุงุญุฏ ุงุฒ Jest ู testing-library/react ุงุณุชูุงุฏู ฺฉูุฏ.
* ูุญุท ุชุณุช ุฌุฏุง ุจุง MongoDB in-memory (mongodb-memory-server) ุชูุตู ูโุดูุฏ.
* ูุณุฑูุง ูพฺุฏู ุณุฑูุฑ ู ููุทู ุจุงุฒ ุจุง ุชุณุชโูุง ุงูุชูุง ุจู ุงูุชูุง (Cypress) ูพูุดุด ุฏุงุฏู ุดููุฏ.

---

## ๐ฆ ูฺฉุงุช ุงุณุชูุฑุงุฑ (Deployment)

* ูุญุท ุชููุฏ: `NODE_ENV=production` ู HTTPS ุงุฌุจุงุฑ.
* ุงุฒ ุณุฑูุณโูุง ูุซู Render, Vercel (ูุฑุงูุช)ุ ุง ุณุฑูุฑ VPS ุจุฑุง ุจฺฉโุงูุฏ ุงุณุชูุงุฏู ุดูุฏ. ุจุฑุง deploy ฺฉุงูู ุจุง WebSocket ุจูุชุฑ ุงุณุช ุณุฑูุฑ Express ุฑุง ุฑู ฺฉ ุณุฑูุณ ูุงุจู Stateful ุงุฌุฑุง ฺฉูุฏ (ูุซูุงู Render Web Service ุง ฺฉ VPS/Container).
* ุชูุธูุงุช ููุงุณโูพุฐุฑ: ุงฺฏุฑ ุชุนุฏุงุฏ ุจุงุฒฺฉูุงู ุฒุงุฏ ุดูุฏุ ูุงุฒ ุจู sticky sessions ุง Redis adapter ุจุฑุง Socket.io ุฎูุงูุฏ ุฏุงุดุช.

---

## ๐งญ ุชุฌุฑุจุงุช ฺฉุงุฑุจุฑ (UX) ูพุดููุงุฏ

* ุตุฏุง ุญุฑฺฉุชุ ฺฉุด ู ฺฏุฑูุชู ููุฑู ุจุง ุญุฌู ูุงุจู ุชูุธู.
* ุงุนูุงูโูุง ุณูุช ฺฉูุงูุช ุจุฑุง ุฏุนูุชโูุง ู ุฏุฑุฎูุงุณุชโูุง ุฏูุณุชุงู.
* ุญุงูุช ูุดุงูุฏู (spectator) ุจุง ุชุฃุฎุฑ ุงูุฏฺฉ ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุชููุจ.
* ุชูุธูุงุช ุฒูุงู (bullet/rapid/classical) ู ูุงูุจโูุง ุณูุงุฑุด.

---

## ๐ค ูุดุงุฑฺฉุช (Contributing)

1. ฺฉ issue ุจุงุฒ ฺฉูุฏ ุง ุงุฒ ฺฉ branch ุฌุฏุฏ ุจุฑุง ูฺุฑ/ูฺฉุณ ุงุณุชูุงุฏู ฺฉูุฏ.
2. Pull request ุจุง ุชูุถุญ ุชุบุฑุงุช ุงุฑุณุงู ฺฉูุฏ.
3. ุฑุนุงุช ููุงูู lint (ESLint + Prettier) ู ูพูุดุด ุชุณุชโูุง ููุฑุฏ ุงูุชุธุงุฑ ุงุณุช.

---

## ๐ ูุณุฎู ู ูฺฏูุฏุงุฑูุฏู

* ูุณุฎู: **5.0 โ Hina Chess Pro (Pro)** โ ฒฐฒถ
* ุทุฑุงุญ ู ูพุงุฏูโุณุงุฒ: **im_abi**

---


